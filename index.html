<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor Github</title>
</head>

<body>
    <h1>Conversor Github</h1>
    <h2>La ventana se abre automaticamente al pegar el enlace:</h2>

    <input id="inputGithub" type="search" value="" placeholder="Input Automatico (ctrl + v)" required="required"
        onfocus="this.value=''" style="width: 60%; height: 5em;">
        <br><br>
        <h2>La ventana se abre automaticamente al presionar enter:</h2>
    <input id="inputGithubManual" type="search" value="" placeholder="Input Manual (Tecla Enter)" required="required"
        onfocus="this.value=''" style="width: 60%; height: 5em;">

    <h2>Recibe URL de un Pages: <span style="color:red">https://user.github.io/proyect/index.html</span>
        ,Y devuelve la URL del proyecto: <span style="color:green">https://github.com/user/proyect</span></h2>

    <h2>Recibe URL de un proyecto: <span style="color:red">https://github.com/user/proyect</span> ,Y devuelve URL del
        Pages: <span style="color:green">https://user.github.io/proyect</span></h2>
    <h2>(No funciona si el proyecto tiene desactivado Github Pages)</h2>
</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        inputGithub.addEventListener("input", (e) => {
            generarGithubUrl("inputGithub");
    })
    
        //El Input manual se ejecuta al presionar Enter
        inputGithubManual.addEventListener("keydown", githubEnterDetect);
        function githubEnterDetect(e) {
            switch (e.key) {
                case "Enter":
                    generarGithubUrl("inputGithubManual");
                    break;
            }
        }
    });

    function generarGithubUrl(id) {
        let userGithub = document.getElementById(id).value;
        //https://github.com/user/proyect a: https://user.github.io/proyect
        if (userGithub.includes("https://github.com/")) {
            userGithub = userGithub.substring(19, Infinity);
            let proyectGithub = userGithub;

            userGithub = userGithub.substring(0, userGithub.indexOf('/')); 
            proyectGithub = proyectGithub.substring(proyectGithub.indexOf('/'), Infinity); 
            window.open("https://" + userGithub + ".github.io" + proyectGithub);
        } //https://user.github.io/proyect/index a: https://github.com/user/proyect
        else {
            userGithub = userGithub.substring(8, Infinity);
            let proyectGithub = userGithub; 

            userGithub = userGithub.substring(0, userGithub.indexOf('.')); 
            proyectGithub = proyectGithub.substring(proyectGithub.indexOf('/') + 1, Infinity); 
            proyectGithub = proyectGithub.substring(0, proyectGithub.indexOf('/')); 
            window.open("https://github.com/" + userGithub + "/" + proyectGithub);
        }
    }
</script>

</html>
